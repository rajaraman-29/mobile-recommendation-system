<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Recommended Mobiles</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<button class="dark-toggle" onclick="toggleDarkMode()">üåô</button>

<h2 class="title results-title">Recommended Mobiles üì±</h2>

<form action="/compare" method="post">

<div class="results-container">

{% for mobile in mobiles %}
<div class="mobile-card">

    <div class="card-top">
        <label>
            <input type="checkbox" name="compare" value="{{ mobile.model }}"> Compare
        </label>

        {% if loop.index == 1 %}
            <span class="top-pick">Top Pick ‚≠ê</span>
        {% endif %}
    </div>

    <img src="{{ mobile.image }}" alt="{{ mobile.model }}"
         onerror="this.src='/static/fallback.png'">

    <h3>{{ mobile.brand }} {{ mobile.model }}</h3>

    <p class="price">‚Çπ{{ mobile.price }}</p>

    <p class="specs">
        RAM: {{ mobile.ram }} GB |
        Storage: {{ mobile.storage }} GB
    </p>

    <p class="rating">‚≠ê {{ mobile.rating }}</p>

    <p class="best-price">
        Best Price: {{ mobile.best_store }} ‚Äì ‚Çπ{{ mobile.best_price }}
    </p>

    <p class="reason">
        <strong>Why recommended:</strong> {{ mobile.reason }}
    </p>

    <div class="buy-links">
        <a href="{{ mobile.amazon_link }}" target="_blank" class="store-btn amazon">Amazon</a>
        <a href="{{ mobile.flipkart_link }}" target="_blank" class="store-btn flipkart">Flipkart</a>
        <a href="{{ mobile.croma_link }}" target="_blank" class="store-btn croma">Croma</a>
    </div>

</div>
{% endfor %}

</div>

<div class="compare-sticky">
    <button type="submit" class="compare-btn">Compare Selected</button>
</div>

</form>

<a href="/" class="back-link">‚¨Ö Back to Home</a>

<script>
function toggleDarkMode() {
    document.body.classList.toggle("dark");
    localStorage.setItem("darkMode", document.body.classList.contains("dark"));
}
if (localStorage.getItem("darkMode") === "true") {
    document.body.classList.add("dark");
}
</script>

</body>
</html>
